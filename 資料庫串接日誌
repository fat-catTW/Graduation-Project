2/18 串接資料庫，實作註冊登入
Unity 串接 MySQL 中間需要用到Flask API

Flask連資料庫：
首先需要在Weishinru底下建立一個app.py處理Flask與資料庫的連線
本來打算把註冊登入拆出來寫 但寫不出來 不過寫不出來的Flask檔案有保留

app.py設定好後 要先到終端機重新啟動虛擬環境 當關閉終端機或重啟電腦時 Python 虛擬環境 (venv) 會自動關閉
因此每次都需要執行以下命令來重新啟動虛擬環境： source myproject-env/bin/activate
開好後，要啟動app.py 請在終端機輸入：python app.py
而後要主動關閉虛擬環境：deactivate

在啟動app.py後，需查看 http://127.0.0.1:8000/ 若顯示「Flask 伺服器運行中!」表Flask成功連接資料庫

Unity連Flask:
先在全域創建一個空物件叫做：APIManager，層級與Canvas相同
在Unity裡create Sript 寫APIManager.cs 管理與Flask連接 註冊與登入（目前登入還沒做完）
需注意!! 元件名稱很重要 
[Header("註冊 UI 元件")]
    public TMP_InputField registerUsernameInput;
    public TMP_InputField registerEmailInput;
    public TMP_InputField registerPasswordInput;
    public Button registerButton;

    [Header("登入 UI 元件")]
    public TMP_InputField loginEmailInput;
    public TMP_InputField loginPasswordInput;
    public Button loginButton;

    [Header("頁面 Panel")]
    public GameObject SigninPanel;   // 註冊頁
    public GameObject LoginPanel;    // 登入頁
    public GameObject HomePagePanel; // 主頁 (登入成功後顯示)

以上為所有元件應叫名稱 請確保相符 並將這些元件 拉進 APIManager的Inspector對應的框框裡面
另外，注意！！註冊與登入的On click()互動需要刪除 交互會寫在APIManager裡，不過目前還沒有測試能否交互成功
目前使用的http://127.0.0.1:8000/ 無法在手機上連到Flask，最簡單的方式是讓我的電腦與手機在同個WiFi網路內

	1.	找到你的電腦的 IP 地址（局域網內）： •	Mac 終端機輸入：ifconfig | grep "inet "
	2.	修改 Flask 啟動方式： •	你的 app.py 目前這樣： 
if __name__ == '__main__':
    app.run(debug=True, host='0.0.0.0', port=8000)
	•	host='0.0.0.0' 讓 Flask 可以被同一網路內的設備訪問。
	3.	在手機上測試：
	•	用 手機瀏覽器或 Unity 請求 http://192.168.1.100:8000/，看看能否成功連接。
注意：
📌 這種方式適合開發測試，但 Flask 開發模式 (debug=True) 在正式環境不安全。
可再考慮部署到雲端，但很多要付費，後面太閒的話可以部署。

2/20 我把資料庫成功弄到雲端了，Flask API也上去雲端了!

MySQL是弄到railway裡面 railway.com
Flask API弄到了render裡面 dashboard.render.com裡面
我的Flask API的雲端網址是: https://feyndora-api.onrender.com

然後雲端的MySQL我也成功連到Azure Studio Code這裡 方便我用寫Code的方式新增資料表

MySQL Public URL: mysql://root:iltFdQcGSTrQoiYsydTrUnBAWqMpSBIV@yamanote.proxy.rlwy.net:54767/railway
記得connect資料庫的資訊是
欄位	對應值
Server Name（主機）	yamanote.proxy.rlwy.net
Port（端口）	54767
User Name（使用者）	root
Password（密碼）	iltFdQcGSTrQoiYsydTrUnBAWqMpSBIV
Database Name（資料庫）	railway

2/23 成功在主頁顯示課程
更新了app.py APIManager.cs CourseManager.cs
✅課程預製體顯示
✅可以搜尋課程
✅可以刪除課程
✅可以按更新 更新課程
不過，收藏課程還沒製作完成，但程式碼有先寫好

需要注意：
1.要在主頁加入CourseManager，然後放入CourseManager.cs
2.要把RecordModule變成prefab
3.要改裡面的名稱
4.要弄一個slider叫做progressBar
5.裡面的細項、起始點、終點要注意
6.前面圖片顯示要記得改為Sprite、single
7.原圖片選白色，才不會擋住動態生成圖片

3/3 補紀錄改頭像
要改的有SettingsManager.cs AvatarManager.cs APIManager.cs 這些都要改
記得有把紫色圈圈還有勾勾弄成一個 SelectionIndicator

3/14 個人頁奮鬥
個人頁功能真的要殺死我了
不知是誰設計的 發瘋！
總而言之 要改APIManager.cs 還有AchievementManager.cs
要注意 成就的層級 還有領取獎勵的按鈕要注意OnClick() 選 .SetActive
還有注意有沒有名稱的問題 現在就差任務了 加油！雖然之後還有教師卡片的部分....

3/15 任務頁完成了 等待下週一測試
這次又改了APIManager.cs 還有WeeklyTaskManager.cs
首先要記得把progressbar從之前的prefab複製過來 因為要是slider
還有要注意總共有6個任務按鈕 記得設定OnClick 選WeeklyTaskManager 然後方法選 ClaimTaskReward 數字分別為 0 1 2
然後放全域就可以了
 
3/18 任務頁測試的還行 簽到頁再等一個下週測試吧 理論上可行
最重要的是我完成課程頁了 我好棒 花了兩天時間 好累
主要是我都還要再重做一次 然後我現在APIManager要合併兩個版本 很怕出問題
現在又多了新的程式碼 有PresetCoursesManager.cs CourseData.cs APIManager一樣要改... 然後還有別忘記DragMove.cs也要改
可能還會需要調Content 還要把收藏區的課程變成prefab 注意裡面圖片、類別的命名 記得讓推薦區的課程Add Component 把Coursedata加進去
很重要收藏區的prefab也要加CourseData.cs 但裡面不用填東西 然後go button的Onclick 要先把prefab本身加進去 然後選擇 CourseData.OpenCourseDetail 喔對了 toggle的部分要反邏輯
CoursePage_1 CoursePage_2 CoursePage_3 要改名沒錯 然後BackButton 要綁PresetCoursesManager 方法要綁 ReturnToCourseList
喔還有PresetCoursesManager要放全域

4/26 VR端老師連接
已經好久沒紀錄了 這次更新了很多內容 總算應該是完成了
要更新的程式碼有：AudioManager、ChatWithProfessor、TeacherManager、PersistentDataManager、VRLogin、ExitPanelController

首先，要改PersistenDataManager、VRLogin，讓teacher_card_id也要可以從資料庫取得
其次要注意，Audiomanager直接掛載到Enviroment上就好，然後在全域加上TeacherManager，把模型都拉進去，按照：Card的順序拖入進去，然後Voice_id也直接寫入
最後，ExitPanelController也要修改，讓他可以把is_vr_ready改成0

gU2KtIu9OZWy3KqiqNj6 雅典娜
4VZIsMPtgggwNg7OXbPY 聖派翠克 
BZLsSg9fDGFYEEJQ4JU3 哥布林 
BrbEfHMQu0fyclQR7lfh 海盜 
fQj4gJSexpu8RDE2Ii5m 盛惟老師
BrbEfHMQu0fyclQR7lfh 聖誕老人

子物件名稱: ChapterTitleYellow(Clone)
UnityEngine.Debug:Log (object)
chatWithProfessor:HandleChaptersFetched (Chapter[]) (at Assets/Scripts/OneToOneChat/chatWithProfessor.cs:339)
fetchRenderToC/<FetchChapters>d__7:MoveNext () (at Assets/Scripts/OneToOneChat/fetchRenderToC.cs:54)
UnityEngine.SetupCoroutine:InvokeMoveNext (System.Collections.IEnumerator,intptr)

開始錄音... 使用設備: Microphone (C-Media(R) Audio)
UnityEngine.Debug:Log (object)
AudioManager:StartRecording () (at Assets/Scripts/AudioManager.cs:77)
AudioRecordUI:OnRecordButtonClick () (at Assets/Scripts/AudioRecordUI.cs:52)
UnityEngine.XR.Interaction.Toolkit.UI.UIInputModule:Update () (at ./Library/PackageCache/com.unity.xr.interaction.toolkit/Runtime/UI/UIInputModule.cs:158)

音頻設置 - 採樣率: 44100Hz, 聲道數: 1, 最大長度: 60秒
UnityEngine.Debug:Log (object)
AudioManager:StartRecording () (at Assets/Scripts/AudioManager.cs:78)
AudioRecordUI:OnRecordButtonClick () (at Assets/Scripts/AudioRecordUI.cs:52)
UnityEngine.XR.Interaction.Toolkit.UI.UIInputModule:Update () (at ./Library/PackageCache/com.unity.xr.interaction.toolkit/Runtime/UI/UIInputModule.cs:158)

錄音結束
UnityEngine.Debug:Log (object)
AudioManager:StopRecording () (at Assets/Scripts/AudioManager.cs:92)
AudioRecordUI:OnRecordButtonClick () (at Assets/Scripts/AudioRecordUI.cs:59)
UnityEngine.XR.Interaction.Toolkit.UI.UIInputModule:Update () (at ./Library/PackageCache/com.unity.xr.interaction.toolkit/Runtime/UI/UIInputModule.cs:158)

錄音停止，顯示 loading 動畫
UnityEngine.Debug:Log (object)
chatWithProfessor:HandleRecordingStopped () (at Assets/Scripts/OneToOneChat/chatWithProfessor.cs:438)
AudioManager:StopRecording () (at Assets/Scripts/AudioManager.cs:95)
AudioRecordUI:OnRecordButtonClick () (at Assets/Scripts/AudioRecordUI.cs:59)
UnityEngine.XR.Interaction.Toolkit.UI.UIInputModule:Update () (at ./Library/PackageCache/com.unity.xr.interaction.toolkit/Runtime/UI/UIInputModule.cs:158)

錄音長度: 60秒
UnityEngine.Debug:Log (object)
AudioManager:StopRecording () (at Assets/Scripts/AudioManager.cs:100)
AudioRecordUI:OnRecordButtonClick () (at Assets/Scripts/AudioRecordUI.cs:59)
UnityEngine.XR.Interaction.Toolkit.UI.UIInputModule:Update () (at ./Library/PackageCache/com.unity.xr.interaction.toolkit/Runtime/UI/UIInputModule.cs:158)

生成的 WAV 檔案大小: 5292044 bytes
UnityEngine.Debug:Log (object)
AudioManager:AudioToWav (UnityEngine.AudioClip) (at Assets/Scripts/AudioManager.cs:281)
AudioManager/<ProcessAudio>d__16:MoveNext () (at Assets/Scripts/AudioManager.cs:119)
UnityEngine.MonoBehaviour:StartCoroutine (System.Collections.IEnumerator)
AudioManager:StopRecording () (at Assets/Scripts/AudioManager.cs:101)
AudioRecordUI:OnRecordButtonClick () (at Assets/Scripts/AudioRecordUI.cs:59)
UnityEngine.XR.Interaction.Toolkit.UI.UIInputModule:Update () (at ./Library/PackageCache/com.unity.xr.interaction.toolkit/Runtime/UI/UIInputModule.cs:158)

音頻參數 - 採樣率: 44100Hz, 聲道數: 1, 位元深度: 16-bit
UnityEngine.Debug:Log (object)
AudioManager:AudioToWav (UnityEngine.AudioClip) (at Assets/Scripts/AudioManager.cs:282)
AudioManager/<ProcessAudio>d__16:MoveNext () (at Assets/Scripts/AudioManager.cs:119)
UnityEngine.MonoBehaviour:StartCoroutine (System.Collections.IEnumerator)
AudioManager:StopRecording () (at Assets/Scripts/AudioManager.cs:101)
AudioRecordUI:OnRecordButtonClick () (at Assets/Scripts/AudioRecordUI.cs:59)
UnityEngine.XR.Interaction.Toolkit.UI.UIInputModule:Update () (at ./Library/PackageCache/com.unity.xr.interaction.toolkit/Runtime/UI/UIInputModule.cs:158)

準備發送音頻數據，大小: 5292044 bytes
UnityEngine.Debug:Log (object)
AudioManager/<ProcessAudio>d__16:MoveNext () (at Assets/Scripts/AudioManager.cs:126)
UnityEngine.MonoBehaviour:StartCoroutine (System.Collections.IEnumerator)
AudioManager:StopRecording () (at Assets/Scripts/AudioManager.cs:101)
AudioRecordUI:OnRecordButtonClick () (at Assets/Scripts/AudioRecordUI.cs:59)
UnityEngine.XR.Interaction.Toolkit.UI.UIInputModule:Update () (at ./Library/PackageCache/com.unity.xr.interaction.toolkit/Runtime/UI/UIInputModule.cs:158)

原始轉寫文本: 在這個實驗中，我們使用了 NaCl 溶液來測試樣本的導電性。
UnityEngine.Debug:Log (object)
AudioManager/<ProcessAudio>d__16:MoveNext () (at Assets/Scripts/AudioManager.cs:140)
UnityEngine.SetupCoroutine:InvokeMoveNext (System.Collections.IEnumerator,intptr)

處理後的轉寫文本: 在這個實驗中，我們使用了 NaCl 溶液來測試樣本的導電性。
UnityEngine.Debug:Log (object)
AudioManager/<ProcessAudio>d__16:MoveNext () (at Assets/Scripts/AudioManager.cs:144)
UnityEngine.SetupCoroutine:InvokeMoveNext (System.Collections.IEnumerator,intptr)

這是使用者的回答:在這個實驗中，我們使用了 NaCl 溶液來測試樣本的導電性。 
1貓與人的關係2貓的習性特徵3常見貓品種介紹4飼養貓的責任5結束

        目錄總共有5個章節
        這是上傳內容的目錄。
        請完全遵守Instruction進行 Phrase2，依序每個目錄要問兩個問題。

        回覆請用一定要用JSON的格式 不然扁你
        Json要包含兩個Field 第一個是 progress 用數字標明目前輔導到哪個目錄主題 ， 第二個是reply也就是你的回覆。
        範例Json:
        {
            "action": "one_to_one",
            "progress": 2,
            "reply": "你的回答可以更精確......"
        }

        回覆請用一定要用JSON的格式 不然扁你
        每個reply請不要超出100字。
        請注意使用者的回答，如果回答錯誤就請他修正。 如果回答正確就給予鼓勵並前往下一題。
        目前目錄問題都完成了就進下一個目錄
        當進行到最後的章節"結束"就請在JSON的 reply 中只回 "GoodJobYouAreGoodToGo"
        注意是要進行到最後的章節"結束後"才在reply只回  "GoodJobYouAreGoodToGo" 不要有其他內容 不然扁你
        
UnityEngine.Debug:Log (object)
chatWithProfessor/<SendMessage>d__29:MoveNext () (at Assets/Scripts/OneToOneChat/chatWithProfessor.cs:168)
UnityEngine.MonoBehaviour:StartCoroutine (System.Collections.IEnumerator)
AudioManager/<ProcessAudio>d__16:MoveNext () (at Assets/Scripts/AudioManager.cs:152)
UnityEngine.SetupCoroutine:InvokeMoveNext (System.Collections.IEnumerator,intptr)

清理後的 JSON: {  "action": "one_to_one",  "progress": 1,  "reply": "很遺憾，你提到的實驗與'貓與人的關係'主題不相關。思考一下如何描述貓如何影響人類的生活或者人類對貓的情感連結。"}
UnityEngine.Debug:Log (object)
chatWithProfessor:CleanJsonString (string) (at Assets/Scripts/OneToOneChat/chatWithProfessor.cs:431)
chatWithProfessor/<SendMessage>d__29:MoveNext () (at Assets/Scripts/OneToOneChat/chatWithProfessor.cs:185)
UnityEngine.SetupCoroutine:InvokeMoveNext (System.Collections.IEnumerator,intptr)

原始 JSON 字符串: {  "action": "one_to_one",  "progress": 1,  "reply": "很遺憾，你提到的實驗與'貓與人的關係'主題不相關。思考一下如何描述貓如何影響人類的生活或者人類對貓的情感連結。"}
UnityEngine.Debug:Log (object)
chatWithProfessor/<SendMessage>d__29:MoveNext () (at Assets/Scripts/OneToOneChat/chatWithProfessor.cs:186)
UnityEngine.SetupCoroutine:InvokeMoveNext (System.Collections.IEnumerator,intptr)

老師回覆內容: 很遺憾，你提到的實驗與'貓與人的關係'主題不相關。思考一下如何描述貓如何影響人類的生活或者人類對貓的情感連結。
UnityEngine.Debug:Log (object)
chatWithProfessor/<SendMessage>d__29:MoveNext () (at Assets/Scripts/OneToOneChat/chatWithProfessor.cs:193)
UnityEngine.SetupCoroutine:InvokeMoveNext (System.Collections.IEnumerator,intptr)

目前進度: 1
UnityEngine.Debug:Log (object)
chatWithProfessor/<SendMessage>d__29:MoveNext () (at Assets/Scripts/OneToOneChat/chatWithProfessor.cs:194)
UnityEngine.SetupCoroutine:InvokeMoveNext (System.Collections.IEnumerator,intptr)

準備發送TTS請求: {"text":"很遺憾，你提到的實驗與'貓與人的關係'主題不相關。思考一下如何描述貓如何影響人類的生活或者人類對貓的情感連結。","voice_id":"default"}
UnityEngine.Debug:Log (object)
chatWithProfessor/<TextToSpeech>d__30:MoveNext () (at Assets/Scripts/OneToOneChat/chatWithProfessor.cs:254)
UnityEngine.MonoBehaviour:StartCoroutine (System.Collections.IEnumerator)
chatWithProfessor/<SendMessage>d__29:MoveNext () (at Assets/Scripts/OneToOneChat/chatWithProfessor.cs:197)
UnityEngine.SetupCoroutine:InvokeMoveNext (System.Collections.IEnumerator,intptr)

Change Progress to 1
UnityEngine.Debug:Log (object)
chatWithProfessor:progressUpdate (int) (at Assets/Scripts/OneToOneChat/chatWithProfessor.cs:373)
chatWithProfessor/<SendMessage>d__29:MoveNext () (at Assets/Scripts/OneToOneChat/chatWithProfessor.cs:199)
UnityEngine.SetupCoroutine:InvokeMoveNext (System.Collections.IEnumerator,intptr)

Updating Progress to DB...
UnityEngine.Debug:Log (object)
chatWithProfessor/<sendProgressUpdate>d__34:MoveNext () (at Assets/Scripts/OneToOneChat/chatWithProfessor.cs:392)
UnityEngine.MonoBehaviour:StartCoroutine (System.Collections.IEnumerator)
chatWithProfessor:progressUpdate (int) (at Assets/Scripts/OneToOneChat/chatWithProfessor.cs:386)
chatWithProfessor/<SendMessage>d__29:MoveNext () (at Assets/Scripts/OneToOneChat/chatWithProfessor.cs:199)
UnityEngine.SetupCoroutine:InvokeMoveNext (System.Collections.IEnumerator,intptr)

音頻接收成功，長度: 11.859秒
UnityEngine.Debug:Log (object)
chatWithProfessor/<TextToSpeech>d__30:MoveNext () (at Assets/Scripts/OneToOneChat/chatWithProfessor.cs:271)
UnityEngine.SetupCoroutine:InvokeMoveNext (System.Collections.IEnumerator,intptr)

Progress updated successfully!
UnityEngine.Debug:Log (object)
chatWithProfessor/<sendProgressUpdate>d__34:MoveNext () (at Assets/Scripts/OneToOneChat/chatWithProfessor.cs:410)
UnityEngine.SetupCoroutine:InvokeMoveNext (System.Collections.IEnumerator,intptr)


